# Toggle logging of the current pane to a per-window file in the home directory.
# Bind prefix+P to start/stop piping output into ~/#W.log and display confirmation.
bind P pipe-pane -o "cat >>~/#W.log" \; display "Toggled logging to ~/#W.log"

# Allow up to 32 characters for the left status segment.
set -g status-left-length 32
# Allow up to 150 characters for the right status segment.
set -g status-right-length 150
# (Legacy) keep UTF-8 rendering for the status line enabled.
set -g status-utf8 on
# Advertise screen-256color so tmux exposes the full 256-color palette.
set -g default-terminal "screen-256color"

# Use white text for the status bar by default.
set -g status-fg white
# Use dark grey (colour234) as the status bar background.
set -g status-bg colour234
# Highlight windows with recent activity by making their titles bold.
set -g window-status-activity-attr bold
# Color inactive pane borders light grey.
set -g pane-border-fg colour245
# Color the active pane border teal (colour39).
set -g pane-active-border-fg colour39
# Show command/status messages in black text.
set -g message-fg colour16
# Give those messages a yellow background.
set -g message-bg colour221
# Render the messages in bold for visibility.
set -g message-attr bold

# Build the left status segment with the session name, separators, and current user.
set -g status-left '#[fg=colour235,bg=colour252,bold] ❐ #S #[fg=colour252,bg=colour238,nobold]⮀#[fg=colour245,bg=colour238,bold] #(whoami) #[fg=colour238,bg=colour234,nobold]⮀'
# Format inactive window entries (index and name) in the status bar.
set -g window-status-format "#[fg=white,bg=colour234] #I #W "
# Format the active window entry with powerline-style separators and bold text.
set -g window-status-current-format "#[fg=colour234,bg=colour39]⮀#[fg=colour25,bg=colour39,noreverse,bold] #I ⮁ #W #[fg=colour39,bg=colour234,nobold]⮀"
# Show wemux user information on the right side of the status bar.
set -g status-right "#(wemux status_users)"

# Settings adapted from The tmux Book.
# Keep the escape-sequence timeout to 1 ms so key chords (e.g., Vim Esc) feel instant.
set -sg escape-time 1 
# Start window numbering at 1 instead of 0.
set -g base-index 1
# Start pane numbering at 1 instead of 0.
setw -g pane-base-index 1

# Allow prefix+C-b to send a literal Ctrl-b through to the pane.
bind C-b send-prefix

# Enable copy-mode mouse support for scrolling and selecting.
setw -g mode-mouse on
# Allow clicking to focus panes.
set -g mouse-select-pane on 
# Allow resizing panes by dragging with the mouse.
set -g mouse-resize-pane on 
# Allow clicking window names in the status bar to switch windows.
set -g mouse-select-window on

